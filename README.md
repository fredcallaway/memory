# Optimal meta-level control of memory recall

This repository contains code and data supporting the paper "Optimal meta-level control of memory recall" by Frederick Callaway, Thomas L. Griffiths, Kenneth A. Norman, and Qiong Zhang.

To generate the results in the paper, you can run `make all` in this directory. This will take around 8 hours on a 128 core machine, and assumes you have all necessary dependencies installed.

## Data

- data/full contains the full (before exclusions) data for every experiment, including pilots.
- data/processed contains the final data that we analyzed (after exclusions), corresponding to versions v6.5E (experiment 1) and v5.6B (experiment 2).

## Model

Make sure you have Julia (version 1.7 or newer) installed. Run `julia model/install_dependencies.jl` to install dependencies.

The model results can be generated by running `make results/RUN` in the model/ directory (where RUN can be any string). This will create a model/results/RUN/ directory which contains simulated data for each model in the same format as in data/processed. For example model/results/RUN/exp1/simulations/optimal_trials/1.csv corresponds to data/processed/exp1/trials.csv. It also generates tex files reporting parameters and likelihoods.

Note that the code used to identify the optimal policy and fit participants is somewhat complex. Please contact fredcallaway@gmail.com to schedule a walkthrough meeting if you would like to use this code in your own project.

### Figure-generating files

- plot_example_trace.jl supports Figure 2
- plot_policy_one.jl supports Figure 3

## Analysis

Make sure you have R (version 4.0 or newer) installed. Run `R analysis/install_dependencies.r` to install dependencies.

Running `make stats` in analysis runs the statistical models on the human data and generates tex files for the paper. For plots, runninng `make figs/RUN/exp1` generates figures using model simulations in model/results/RUN/exp1/simulations/. `make figs/RUN/exp2_alt` generates figures for experiment 2 using the alternative lesioned model.

### Result-generating files

- exp1_figs.r generates Figure 5
- exp2_figs.r generates Figures 8-10
- all reported statistics are generated by exp1_stats.r and exp2_stats.r , except for exclusions and participant counts, which are generated by exp1_preprocess.r and exp2_preprocess.r