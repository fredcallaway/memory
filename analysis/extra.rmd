

# Sanity checks for evidence accumulation

These plots test basic predictions of the evidence
accumulation model, that is, effects that come out in the random model. 

These plots exclude timeout trials.

## Probability of remembering first word

```{r,remember-first, fig.width=WIDTH, fig.height=HEIGHT}

df %>%
    filter(response_type == "correct") %>% 
    mutate(choose_first = as.numeric(choose_first)) %>% 
    regress(rel_strength, choose_first) +
    ylab("Prob Select First Cue")
```

```{r}
# multi = multi %>% 
#     mutate(trial_num = row_number())

multi %>%
    filter(response_type == "correct") %>% 
    add_strength(block > 0, 2 * correct -log(rt)) %>% 
    mutate(choose_first = as.numeric(choose_first)) %>% 
    lmer(choose_first ~ rel_strength + (rel_strength|wid), data=.) %>% summ
    # glmer(choose_first ~ rel_strength + (rel_strength|wid), family='binomial', data=.) %>% summ
```

## Reaction time by chosen strength

```{r, fig.width=WIDTH, fig.height=HEIGHT}
df %>% 
    filter(response_type == "correct") %>% 
    regress(chosen_strength, rt)
```

## Last fixation duration by strength

```{r, fig.width=WIDTH, fig.height=HEIGHT}
df %>% 
    filter(response_type == "correct") %>% 
    filter(n_pres > 0) %>% 
    mutate(
        last_pres_time = map_dbl(presentation_times, last),
        last_rel_strength = if_else(last_pres == "first", rel_strength, 1 - rel_strength),
        last_strength = if_else(last_pres == "first", strength_first, strength_second)
    ) %>% 
    regress(last_strength, last_pres_time)
```

# Miscellaneous

## Response types

Note: The model can only predict correct answers and timeouts.

```{r}
raw_df %>% 
    with((proportions(table(name, response_type), margin=1))) %>% 
    kable(digits=2)

    
```

## Reaction time

```{r, fig.width=WIDTH, fig.height=HEIGHT}
df %>% 
    ggplot(aes(rt)) +
    geom_density() +
    facet_grid(~name) +
    labs(x="Reaction Time", y="Density")
```


## Number of fixations

```{r, fig.width=WIDTH, fig.height=HEIGHT}
df %>% 
    filter(n_pres < 10) %>% 
    ggplot(aes(n_pres, ..prop..)) +
    geom_bar() +
    facet_grid(~name) +
    labs(x="Number of Fixations", y="Proportion of Trials")

```
<!-- 
# Check response coding

```{r}
multi %>% filter(word == response)  %>% with(all(correct)) %>% stopifnot
multi %>% filter(response_type == "other") %>% select(word, response) %>% print(n=100)
multi %>% filter(response_type == "intrusion") %>% select(word, response) %>% print(n=100)
multi %>% filter(response_type == "correct" & word != response) %>% select(word, response) %>% print(n=100)
multi %>% transmute(x=nchar(response)) %>% with(table(x))
multi %>% filter(nchar(response)  == 3) %>% select(response)
multi %>% filter(word == 'ewe') %>% select(word, response, response_type)

```
 -->