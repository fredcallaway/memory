#!/usr/bin/env bash
filename="${1%.*}"
R -e "rmarkdown::render('$filename.rmd', encoding = 'UTF-8')"
if [ $? -ne 0 ]; then
   echo "Error compiling $filename.rmd"
   exit
fi

newname=$filename-`date +"%y-%m-%d"`.html
newpath=reports/$newname
mv $filename.html $newpath
git add .
git commit -m "$newpath"

scp $newpath fredc@simcoe:~/www.fredcallaway.com/docs/reports/memory

echo www.fredcallaway.com/reports/memory/$newname